# 数组类型

## 数组（一维/二维）

数组用来存储同一类型值的集合。通过下标访问。

JAVA数组是协变数组类型。每个数组都明确它所允许存储的对象的类型。此时，如果使用父类声明一个数组，那么该数组可以**存储不同子类的对象**而编译器不会报错。

### 创建

创建一个数组之后（new），数组大小不可改。

多维数组，[]越靠近类型标识符的维度越低。例如：

```java
int[][] arr = new int[3][4];
```

其中3代表二维数组的长度（行数），4代表一维数组的长度（列数）

### 初始化

创建一个数组（new）之后，数组会进行初始化：

- 数字数组，所有元素初始化为0
- boolean数组，所有元素初始化为false
- 对象数组，所有元素初始化为null，表示这些元素还未存放任何对象（String也是对象）

#### 简易初始化

使用这种方法初始化时，不要使用 new。

```java
int[] smallPrimes = {2,3,5,7,11,13};
```

#### 匿名数组

```
new int[] {17,19,23,29,31,37};
```

##### [双括号初始化方法](./附录K-JAVA内部类.md)

对于List对象的双括号初始化方法

```java
new ArrayList<String>() {
	{
		add("Harry");
		add("Tony");
	}
}
```

#### 数组索引

对于数组的索引，是可以采用字符集来表示的，`java`采用ASCII编码，将字符转为对应的十进制数，该数即为数组下标。例如

```
int[] arr = new int[256];
arr['a'] = 1;
```

'a'对应的ASCII十进制编码为97，所以`arr`数组中第98位值被赋为1。

#### [Arrays](./常用工具包.md##Arrays类)





## 不规则数组

JAVA其实只有一维数组，而多维数组被称为数组的数组。

例如二维数组的二维每个数组的长度可以不同，但是需要手动创建。

## 泛型数组列表

类型参数不允许是基本类型。

```java
ArrayList<Integer> list = new ArrayList<>();
```

由于每个值分别包装在对象中，所以`ArrayList<Integer>` 的效率远远低于int[]数组。所以这更应该用来构造小型集合，此时操作的方便性要比执行效率更重要。

### `ArrayList`

采用了[类型参数（type parameter）](./附录M-JAVA泛型.md)的[泛型类（generic class）](./附录M-JAVA泛型.md)。

```java
ArrayList<Employee> staff = new ArrayList<>();
// javaSE 7 简化为菱形语法
```

### Vector

### 类型化与原始数组列表的兼容性

#### [泛型擦除](./附录M-JAVA泛型.md) 

编译器在对类型转换进行检查之后，如果没有发现违反规则的现象，就将所有的类型化数组列表转换成原始`ArrayList`对象。所以，在程序运行时，所有数组列表都是一样的，即没有虚拟机中的类型参数。
