# 权限管理命令

## 用户组

> Linux中每个用户必须属于一个组，不能独立于组外。系统中每个文件都有所有者、所在组、其他组的概念

### 所有者

文件或目录的创建者默认称为该文件或目录的所有者

- `chown 用户名 文件名`
  修改文件的或目录的所有者

### 所在组

文件或目录的所在组一般默认为该文件或目录的创建者所在组

- `chgrp 组名 文件名`
  修改文件或目录的所在组

### 其他组

文件或目录的所在组之外的其他组

## 用户组相关命令

> 类似于用户角色

### 新增组

- `groupadd 组名`

### 删除组

- `groupdel 组名`

### 修改用户组

- `usermod -g 用户组 用户名`
  修改用户组

### 相关文件

- `/etc/passwd`
  用户的配置文件，记录用户的各种信息

  ```bash
  # 用户名:口令（密码）:用户标识号（uid）:组标识号（gid）:注释性描述:用户主目录位置:登录Shell
  xpf:x:1000:1000:xpf:/home/xpf:/bin/bash
  tom:x:1001:1002::/home/tom:/bin/bash
  ```

- `/etc/shadow`

  口令的配置文件
  ```bash
  # 登录名:加密口令:最后一次修改时间:最小时间间隔:最大时间间隔:警告时间:不活动时间:失效时间:标志
  xpf:$6$Uxj73/D6xkXp32Kh$KxB1NAXADmPuUnDZ4CRJzzoqejhZ.zF7Kghq8WjojhrvmXNIJpkU8AObWVzfj8/U4a2ajS0kMk3AGfXg8GqK80::0:99999:7:::
  tom:$6$DY1U3uHg$2sEHddn8O3MxXFEtgqU9Sfs41Ix6Lz3HPDPnHmFhLHwr7ydsntXydRSrZRlTI.8AZDLQMiCRYzUCqRRx05hU2/:19675:0:99999:7:::
  ```

- `/etc/group`
  组配置文件，记录Linux包含的组信息

  ```bash
  # 组名:加密口令:组标识号（gid）:组内用户列表
  xpf:x:1000:xpf
  wudang:x:1001:
  mojiao:x:1002:
  ```


## 文件操作权限

```shell
drwxr-xr-x.  19 root root  3260 11月 15 21:25 dev
#0 文件类型
#1-3 文件所有者权限
#4-6 文件所在组权限
#7-9 文件其他组权限
```

前10为代表文件的类型以及文件的权限

### 文件类型

- `d`
  目录
- `l`
  链接
- `c`
  字符设备文件，例如鼠标、键盘
- `b`
  块设备文件，例如硬盘
- `-`
  普通文件，例如 `.txt`、`.log`

### 权限类型

- `r`（4）
  对文件来说，代表可读，可以读取，查看
  对目录来说，代表可读，可以读取目录内容
- `w`（2）
  对文件来说，代表可写，可以修改，但是不一定可以删除，删除一个文件需要用户对该文件所在目录拥有写的权限才可以
  对目录来说，代表可写，可以修改目录内容，如果想要操作目录内的文件，还需要用户拥有文件对应的权限
- `x`（1）
  对文件来说，代表可执行，可以被执行
  对目录来说，代表可进入，可以进入该目录

## 权限相关命令

- `chmod`
  修改文件或目录的权限
- `chattr`
  改变文件或目录属性，比如只读等等
