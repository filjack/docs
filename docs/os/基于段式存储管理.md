# 基于段式存储管理

## 分段

进程的地址空间按照程序自身的逻辑关系划分为若干个段，每个段都有一个段名（在低级语言中，程序员使用段名来编程），每段从0开始编址。在内存中，以段为单位进行分配，每个段在内存中占据连续空间，段与段之间可以不相邻。

逻辑地址由段号（段名）和段内地址（段内偏移量）所组成

<img :src="$withBase='/img/os-p1.png'" class="align-center" />

- 段号的位数决定了每个进程最多可以分几段
- 段内地址位数决定了每个段的最大长度是多少

## 段表

OS为每个进程建立的保存了程序各个逻辑段与其在物理内存中离散存储的位置的映射关系表

<img :src="$withBase='/img/os-p2.png'" class="align-center" />

1. 每个段对应一个段表项，记录了该段在内存中的起始位置（基址）和段的长度（段长）
2. 各个段表项是相同的。段号可以是隐含的，不占存储空间

## 分段 VS 分页

- 页是信息的物理单位。分页的主要目的是为了实现离散分配，提高内存利用率。分页仅仅是系统管理上的需要，完全是系统行为，对用户是不可见的。
- 段是信息的逻辑单位。分段的主要目的是更好地满足用户需求。一个段通常包含着一组属于一个逻辑模块的信息。分段对用户是可见的，用户编程时需要显式地给出段名

页的大小固定且由系统决定。段的长度却不固定，决定于用户编写的程序。

分段比分页更容易实现信息的共享和保护。

