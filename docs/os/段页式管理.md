# 段页式管理

## 分段 VS 分页

### 分页管理

#### 优点

内存利用率高，不会产生外部碎片，只会有少量的页内碎片

#### 缺点

不方便按照逻辑模块实现信息的共享和保护

### 分段管理

#### 优点

很方便按照逻辑模块实现信息的共享和保护

#### 缺点

如果段长过大，为其分配很大的连续空间会很不方便。另外，段式管理会产生外部碎片

## 段页式

将进程按逻辑模块分段，在将每段每页，将内存空间分为大小相同的页框，将各页面分别装入各内存块中。

### 逻辑地址结构

<img :src="$withBase='/img/os-pp1.png'" class="align-center" />

#### 段表

<img :src="$withBase='/img/os-pp2.png'" class="align-center" />

#### 页表

<img :src="$withBase='/img/os-pp3.png'" class="align-center" />

### 地址变换

1. 由逻辑地址得到段号、页号、页内偏移量
2. 段号与段表寄存器中的段长比较，检查是否越界
3. 由段表始址、段号找到对应段表项
4. 根据段表中记录的页表长度，检查页号是否越界
5. 由段表中的页表地址、页号得到查询页表，找到相应页表项
6. 由页面存放的内存块号、页内偏移量得到最终的物理地址
7. 访问目标单元