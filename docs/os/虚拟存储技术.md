# 虚拟存储技术

## 传统存储管理方式的特征

### 传统存储管理方式特征

1. 一次性：作业必须一次性全部装入内存后才开始运行。
   - 作业很大时，不能全部装入内存，导致大作业无法运行
   - 当大量作业要求运行时，由于内存无法容纳所有作业，因此只能有少量作业能运行，导致多道程序并发度下降
2. 驻留性：一旦作业被装入内存，就会一直驻留在内存中，直至作业运行结束。事实上，在一个时间段内，只需要访问作业的一小部分数据即可正常运行，这就导致了内存中会驻留大量的、暂时用不到的数据，浪费了宝贵的内存空间。

### 传统存储管理方式缺点

很多暂时用不到的数据也会长期占用内存，导致内存利用率不高。

## 虚拟内存的定义与特征

### 虚拟内存定义

基于[局部性原理](./具有块表的地址变换机构.md#局部性原理)，在程序装入时，可以将程序中很快会用到的部分装入内存，暂时用不到的部分留在外存，就可以让程序开始执行。

在程序执行过程中，当所访问的信息不在内存时，由于操作系统负责将所需信息从外存[调入内存](./调度.md####中级调度)，然后继续执行程序。

若内存空间不够，由操作系统负责将内存中暂时用不到的信息换出到外存。

在操作系统的管理下，在用户看来似乎有一个比实际内存大得多的内存，这就是虚拟内存。

### 虚拟内存特征

1. 多次性：无需在作业运行时一次性全部装入内存，而是允许被分成多次调入内存
2. 对换性：在作业运行时无需一直常驻内存，而是允许在作业运行过程中，将作业换入、换出
3. 虚拟性：从逻辑上扩充了内存的容量，使用户看到的内存容量，远大于实际的容量



## 实现虚拟内存技术

虚拟内存技术的实现建立在离散分配的内存管理方式基础上。（因为连续分配方式，不方便实现一个作业多次调入内存）

- [请求分页存储管理](./请求分页管理方式.md)
- 请求分段存储管理
- 请求段页式存储管理

### 虚拟内存与非连续分配存储管理方式的区别

1. 在程序执行过程中，当所访问的信息不在内存时，由操作系统负责将所需信息从外存调入内存（**请求调页（调段）**），然后继续执行程序
2. 若内存空间不够，由操作系统负责将内存中暂时用不到的信息换出到外存（**页面置换（段置换）**）